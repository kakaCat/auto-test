# 架构选择指导

## 🎯 快速选择

### 🚀 **推荐：v4 极简架构** (90% 项目适用)

**适用场景**：
- ✅ 新项目启动
- ✅ 快速原型开发
- ✅ AI代码生成
- ✅ 中小型项目
- ✅ 团队快速迭代

**核心优势**：
- 🔥 **极简控制器**：方法不超过5行代码
- 🛡️ **防腐层架构**：清晰的职责分离
- 🔄 **多入口统一**：HTTP/RPC/MQ统一处理
- 🤖 **AI友好**：标准化代码模式

### 📋 其他选择

#### v2 分层架构
**适用场景**：传统Web应用，标准CRUD操作
**选择条件**：团队熟悉传统三层架构，业务逻辑相对简单

#### v3 DDD架构
**适用场景**：大型企业项目，复杂业务逻辑
**选择条件**：团队有DDD经验，业务复杂度高，需要严格的领域建模

## 🔄 架构迁移路径

### 从v3 DDD → v4 极简
1. 简化领域模型为数据模型
2. 合并Service层职责
3. 使用Converter替代复杂的领域转换
4. 统一异常处理

### 从v2 分层 → v4 极简
1. 引入防腐层概念
2. 控制器瘦身到5行以内
3. 增加Converter/Rule/Wrapper工具类
4. 统一多入口架构

## 📊 架构对比

| 特性 | v4极简架构 | v2分层架构 | v3 DDD架构 |
|------|------------|------------|------------|
| 学习成本 | 低 | 中 | 高 |
| 开发速度 | 快 | 中 | 慢 |
| 代码复杂度 | 低 | 中 | 高 |
| 维护成本 | 低 | 中 | 高 |
| AI生成友好 | 高 | 中 | 低 |
| 适用项目规模 | 小-中 | 中 | 大 |

## 🎯 决策树

```
开始
  ↓
项目规模 > 50人团队？
  ↓ 否
业务逻辑极其复杂？
  ↓ 否
需要快速开发？
  ↓ 是
选择 v4 极简架构 ⭐
```

## 📚 相关文档

- [v4 极简架构详细设计](./v4_simplified.md)
- [v2 分层架构设计](./v2.md)
- [v3 DDD架构设计](./v3_ddd.md)
- [编码规范](../standards/coding.md)