# AI自动化测试系统架构总览

## 概述

AI自动化测试系统采用6层分层架构设计，从系统管理到需求管理形成完整的测试管理体系。每一层都有明确的职责和功能，层层递进，实现从系统配置到需求管理的全流程覆盖。

## 6层架构体系

### 架构图示

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                           AI自动化测试系统架构                                   │
├─────────────────────────────────────────────────────────────────────────────────┤
│ 第6层: 需求管理 (Requirement Management)                                       │
│ ┌─────────────────────────────────────────────────────────────────────────────┐ │
│ │ • 需求记录  • 用例关联  • 测试计划  • 执行跟踪  • 覆盖率分析            │ │
│ │ 页面路径: /requirement-management                                           │ │
│ └─────────────────────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────────────────────┤
│ 第5层: 用例场景管理 (Scenario Management)                                      │
│ ┌─────────────────────────────────────────────────────────────────────────────┐ │
│ │ • 场景设计  • 测试数据  • 断言配置  • 执行策略  • 结果验证              │ │
│ │ 页面路径: /scenario-management                                              │ │
│ └─────────────────────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────────────────────┤
│ 第4层: 调用流程 (Call Flows)                                                   │
│ ┌───────────────────────────────┬─────────────────────────────────────────────┐ │
│ │ 4a. API调用流程               │ 4b. 页面调用流程                            │ │
│ │ • 可视化设计器  • 节点编排    │ • 页面操作流程  • 元素交互                 │ │
│ │ • API流程执行  • 数据传递     │ • 页面流程执行  • 状态验证                 │ │
│ │ 页面路径: /workflow-orchestration │ 页面路径: /page-call-flow (独立菜单)   │ │
│ └───────────────────────────────┴─────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────────────────────┤
│ 第3层: 资源管理 (Resource Management)                                          │
│ ┌───────────────────────────────┬─────────────────────────────────────────────┐ │
│ │ API管理 (API Management)      │ 页面管理 (Page Management)                 │ │
│ │ • 接口信息  • 参数定义        │ • 页面信息  • API调用关系                  │ │
│ │ • 系统树形导航  • 批量操作    │ • 页面配置  • 布局设计                     │ │
│ │ 页面路径: /api-management     │ 页面路径: /page-management                 │ │
│ └───────────────────────────────┴─────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────────────────────┤
│ 第2层: 系统管理 (Service Management)                                           │
│ ┌─────────────────────────────────────────────────────────────────────────────┐ │
│ │ • 系统和模块的两级架构  • 系统注册  • 模块分类  • 状态管理              │ │
│ │ 页面路径: /service-management                                               │ │
│ └─────────────────────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────────────────────┤
│ 第1层: 仪表板 (Dashboard)                                                      │
│ ┌─────────────────────────────────────────────────────────────────────────────┐ │
│ │ • 数据概览  • 统计展示  • 快捷入口  • 最近活动  • 系统状态              │ │
│ │ 页面路径: /dashboard                                                        │ │
│ └─────────────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## 各层详细说明

### 第1层: 仪表板 (Dashboard)

**职责**: 系统数据概览和快捷入口导航

**核心功能**:
- **数据统计**: 显示系统、API、场景、工作流等核心数据统计
- **快捷入口**: 提供各功能模块的快捷访问入口
- **最近活动**: 展示系统最近的操作记录和活动
- **系统状态**: 监控系统健康状态和性能指标
- **数据可视化**: 通过图表展示系统使用情况

**页面路径**: `/dashboard`
**实现状态**: ✅ 已实现

### 第2层: 系统管理 (Service Management)

**职责**: 管理系统和模块的两级架构

**核心功能**:
- **系统管理**: 注册和管理各个业务系统
- **模块管理**: 在系统下创建和管理功能模块
- **两级架构**: 系统→模块的层级关系管理
- **状态控制**: 系统和模块的启用/禁用状态管理
- **批量操作**: 支持批量编辑和状态变更

**页面路径**: `/service-management`
**实现状态**: ✅ 已实现（包含系统和模块的统一管理界面）

### 第3层: 资源管理 (Resource Management)

#### API管理 (API Management)

**职责**: 管理API接口信息，支持系统树形导航

**核心功能**:
- **系统树形导航**: 左侧显示系统/模块的树形结构
- **API列表管理**: 右侧显示选中系统/模块下的API列表
- **接口信息**: 记录API的基本信息（名称、描述、URL、请求方法）
- **参数定义**: 定义请求参数、响应参数的结构
- **批量操作**: 支持API的批量导入导出
- **搜索筛选**: 多条件API检索和过滤

**页面路径**: `/api-management`
**实现状态**: ✅ 已实现（包含完整的树形导航和列表管理）

#### 页面管理 (Page Management)

**职责**: 管理页面信息和页面中的API调用关系

**核心功能**:
- **页面配置**: 页面基本信息配置（名称、路径、描述、类型）
- **布局设计**: 页面布局和组件设计
- **API调用关系**: 配置页面中的API调用关系
- **系统关联**: 页面与系统的关联配置
- **批量管理**: 页面的批量导入导出功能
- **步骤化配置**: 分步骤完成页面配置

**页面路径**: `/page-management`
**实现状态**: ✅ 已实现（包含完整的页面配置流程）

### 第4层: 调用流程 (Call Flows)

#### 4a. API调用流程 (API Call Flow)

**职责**: 可视化API调用流程编排和设计

**核心功能**:
- **工作流列表**: 管理和展示所有的API调用流程
- **可视化设计器**: 拖拽式节点编排界面
- **API节点**: 支持系统级联配置的API调用节点
- **流程控制**: 条件分支、并行执行、数据转换等节点
- **流程执行**: API工作流的执行、调试和监控
- **数据传递**: 节点间的数据流转和参数绑定

**页面路径**: `/workflow-orchestration` (列表) + `/designer` (设计器)
**实现状态**: ✅ 已实现（包含完整的可视化设计器）

#### 4b. 页面调用流程 (Page Call Flow)

**职责**: 可视化页面操作流程编排和设计

**核心功能**:
- **页面流程列表**: 管理和展示所有的页面操作流程
- **页面操作设计器**: 页面元素交互和操作流程设计
- **页面节点**: 支持页面导航、元素操作、数据提取等节点
- **UI自动化**: 页面自动化测试流程的执行和监控
- **元素定位**: 页面元素的智能定位和操作
- **状态验证**: 页面状态和操作结果的验证

**页面路径**: `/page-call-flow` (独立菜单)
**实现状态**: 🚧 规划中（独立的页面调用流程功能）

### 第5层: 用例场景管理 (Scenario Management)

**职责**: 基于工作流创建和管理测试场景

**核心功能**:
- **场景列表**: 管理所有的测试用例场景
- **场景设计**: 基于工作流创建具体的测试案例
- **测试数据**: 准备和管理测试所需的数据
- **执行配置**: 设置场景的执行策略和参数
- **结果管理**: 测试执行结果的记录和分析

**页面路径**: `/scenario-management`
**实现状态**: ✅ 已实现（场景列表和基础管理功能）
**数据来源**: 基于第4层的API调用流程和页面调用流程

### 第6层: 需求管理 (Requirement Management)

**职责**: 管理业务需求与测试用例的关联关系

**核心功能**:
- **需求记录**: 记录和管理业务需求、功能需求、技术需求
- **用例关联**: 建立需求与测试场景的多对多关联关系
- **测试计划**: 制定基于需求的测试计划和执行策略
- **执行跟踪**: 跟踪需求相关测试用例的执行情况和结果
- **覆盖率分析**: 分析需求的测试覆盖率和质量指标
- **报告生成**: 生成需求测试报告和质量评估

**页面路径**: `/requirement-management`
**实现状态**: 🚧 规划中（需求与测试的关联管理功能）
**数据来源**: 关联第5层的用例场景

## 数据流向

### 自上而下的使用流程
```
需求管理(需求定义) → 用例场景管理(选择测试场景) → 调用流程(API/页面流程) → 资源管理(API/页面资源) → 系统管理(系统配置) → 仪表板(数据概览)
```

### 自下而上的构建流程
```
系统管理(注册系统和模块) → 资源管理(录入API和页面) → 调用流程设计(API调用流程 + 页面调用流程) → 用例场景管理(创建测试场景) → 需求管理(关联需求和用例)
```

### 两种调用流程的区别
```
API调用流程:
- 专注于API接口的串联和调用
- 数据驱动的自动化测试
- 适合接口测试和业务逻辑验证

页面调用流程:
- 专注于页面操作的串联和执行
- UI交互驱动的自动化测试
- 适合用户界面测试和端到端验证
```

## 使用场景

### 典型工作流程

1. **系统初始化**
   - 在系统管理中注册各个业务系统
   - 为系统创建功能模块分类

2. **资源录入**
   - 在API管理中录入接口信息，按系统/模块分类
   - 在页面管理中录入页面信息和API调用关系

3. **流程设计**
   - 使用可视化设计器创建API调用流程
   - 设计页面调用流程（规划中）
   - 通过拖拽节点编排工作流

4. **场景构建**
   - 基于调用流程创建测试场景
   - 配置测试数据和执行策略

5. **需求管理**
   - 记录业务需求和功能需求
   - 关联需求与测试场景
   - 制定测试计划和执行策略

6. **监控和分析**
   - 在仪表板查看系统概览和统计数据
   - 监控测试执行结果和需求覆盖情况

## 优势特点

### 1. 分层清晰
- 每层职责明确，便于管理和维护
- 层次间依赖关系清楚，易于理解

### 2. 复用性强
- 底层资源可被多个上层流程复用
- 流程可被多个场景复用，场景可服务多个需求

### 3. 可视化操作
- 提供直观的可视化界面
- 降低技术门槛，提高操作效率

### 4. 灵活扩展
- 支持新系统、新模块的快速接入
- 支持复杂业务流程的灵活配置

### 5. 全程追溯
- 从需求到执行的完整追溯链路
- 便于问题定位和影响分析

## 总结

6层架构体系为AI自动化测试系统提供了完整的测试管理框架，从仪表板概览到需求管理，形成了一个闭环的测试体系。当前架构具有以下特点：

### 实现状态
- ✅ **仪表板**: 数据概览和快捷入口
- ✅ **系统管理**: 系统和模块的两级架构管理
- ✅ **资源管理**: API管理和页面管理的完整功能
- ✅ **API调用流程**: 可视化设计器和流程管理
- 🚧 **页面调用流程**: 页面操作流程设计（规划中）
- ✅ **场景管理**: 基础的测试场景管理功能
- 🚧 **需求管理**: 需求与测试关联管理（规划中）

### 架构优势
- **层次清晰**: 每层职责明确，便于理解和维护
- **功能完整**: 覆盖从系统配置到测试执行的完整流程
- **可视化操作**: 提供直观的可视化界面和操作体验
- **扩展性强**: 支持新功能的快速接入和扩展

这种设计既保证了系统的实用性和可操作性，又为未来的功能扩展预留了空间。