# 系统管理页面交互文档

## 页面概述

系统管理页面是平台的核心管理界面，用于管理和维护系统信息。用户可以在此页面查看、创建、编辑和删除系统，以及管理系统的启用状态。

**页面路径**: `/service-management`  
**页面文件**: `src/views/service-management/index.vue`

## 界面布局

### 整体布局结构
```
┌─────────────────────────────────────────────────────────┐
│ 页面头部区域                                             │
│ ├─ 错误提示横幅 (如有错误时显示)                          │
│ ├─ 页面标题: "系统管理"                                   │
│ └─ 操作按钮组: [新增系统] [刷新]                          │
└─────────────────────────────────────────────────────────┘
┌─────────────────────────────────────────────────────────┐
│ 主内容区域 (左右分栏布局)                                │
│ ┌─────────────┬─────────────────────────────────────────┐ │
│ │ 左侧导航面板 │ 右侧详情面板                            │ │
│ │ (宽度: 300px)│ (自适应宽度)                           │ │
│ │             │                                        │ │
│ │ 系统类型筛选 │ 系统详细信息展示区域                    │ │
│ │ ├─ 全部     │ ├─ 基本信息卡片                        │ │
│ │ ├─ 后端系统 │ ├─ 统计信息卡片                        │ │
│ │ └─ 前端系统 │ ├─ 模块列表                            │ │
│ │             │ └─ 操作按钮组                          │ │
│ │ 系统树组件   │                                        │ │
│ │ (SystemTree)│                                        │ │
│ └─────────────┴─────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

### 界面元素详细说明

#### 1. 页面头部区域
- **错误提示横幅**: 当系统出现错误时显示，红色背景，包含错误信息和关闭按钮
- **页面标题**: "系统管理"，使用大号字体
- **新增系统按钮**: 蓝色主要按钮，点击打开系统创建对话框
- **刷新按钮**: 灰色次要按钮，点击刷新页面数据

#### 2. 左侧导航面板
- **系统类型筛选器**: 
  - 全部：显示所有系统
  - 后端系统：只显示后端分类的系统
  - 前端系统：只显示前端分类的系统
- **系统树组件**: 树形结构显示系统列表，支持展开/折叠

#### 3. 右侧详情面板
- **基本信息卡片**: 显示选中系统的基本信息
- **统计信息卡片**: 显示系统相关的统计数据
- **模块列表**: 显示系统下的模块信息
- **操作按钮组**: 编辑、删除、启用/禁用等操作按钮

## 交互流程

### 1. 页面初始化流程

**步骤1**: 页面加载
- 显示加载状态
- 调用API获取启用的系统列表
- 初始化系统类型筛选器为"全部"

**步骤2**: 数据渲染
- 在左侧面板渲染系统树
- 右侧面板显示欢迎信息或默认提示
- 隐藏加载状态

**步骤3**: 错误处理
- 如果API调用失败，显示错误提示横幅
- 提供重试机制

### 2. 系统筛选交互

**操作**: 点击系统类型筛选器

**交互流程**:
1. 用户点击筛选选项（全部/后端系统/前端系统）
2. 高亮选中的筛选选项
3. 调用对应的API获取筛选后的系统列表
4. 更新左侧系统树显示
5. 清空右侧详情面板（如果当前选中的系统不在筛选结果中）

**视觉反馈**:
- 选中的筛选选项高亮显示
- 系统树重新渲染
- 显示加载状态直到数据更新完成

### 3. 系统选择交互

**操作**: 点击系统树中的系统节点

**交互流程**:
1. 用户点击系统树中的某个系统
2. 高亮选中的系统节点
3. 调用API获取系统详细信息
4. 在右侧面板显示系统详情

**右侧面板内容**:
- **基本信息卡片**:
  - 系统名称
  - 系统描述
  - 系统分类（后端/前端）
  - 基础URL
  - 创建时间
  - 更新时间
  - 启用状态

- **统计信息卡片**:
  - 模块数量
  - API数量
  - 页面数量
  - 最近活动时间

- **模块列表**:
  - 显示系统下的所有模块
  - 每个模块显示名称、描述、状态
  - 支持点击查看模块详情

- **操作按钮组**:
  - 编辑系统按钮
  - 删除系统按钮
  - 启用/禁用切换按钮

### 4. 新增系统交互

**操作**: 点击"新增系统"按钮

**交互流程**:
1. 用户点击新增系统按钮
2. 打开系统创建对话框
3. 用户填写系统信息表单
4. 点击确认提交表单
5. 调用API创建系统
6. 关闭对话框并刷新系统列表

**表单字段**:
- 系统名称（必填）
- 系统描述（可选）
- 系统分类（必选：后端/前端）
- 基础URL（必填）
- 启用状态（默认启用）
- 标签（可选）

**验证规则**:
- 系统名称不能为空且不能重复
- 基础URL必须是有效的URL格式
- 系统分类必须选择

**错误处理**:
- 表单验证失败时显示字段错误提示
- API调用失败时显示错误消息
- 提供重试机制

### 5. 编辑系统交互

**操作**: 在系统详情面板点击"编辑"按钮

**交互流程**:
1. 用户点击编辑按钮
2. 打开系统编辑对话框，预填充当前系统信息
3. 用户修改系统信息
4. 点击确认提交更新
5. 调用API更新系统
6. 关闭对话框并刷新显示

**注意事项**:
- 编辑对话框与新增对话框使用相同的表单组件
- 预填充所有当前系统的信息
- 验证规则与新增时相同

### 6. 删除系统交互

**操作**: 在系统详情面板点击"删除"按钮

**交互流程**:
1. 用户点击删除按钮
2. 显示确认删除对话框
3. 用户确认删除操作
4. 调用API删除系统
5. 关闭对话框并刷新系统列表
6. 清空右侧详情面板

**确认对话框内容**:
- 警告图标
- 确认删除文本："确定要删除系统 [系统名称] 吗？"
- 风险提示："删除后将无法恢复，相关的模块、API和页面也将被删除"
- 取消按钮（灰色）
- 确认删除按钮（红色）

### 7. 启用/禁用系统交互

**操作**: 在系统详情面板点击启用/禁用切换按钮

**交互流程**:
1. 用户点击启用/禁用按钮
2. 显示确认对话框（如果是禁用操作）
3. 调用API更新系统状态
4. 更新界面显示状态
5. 刷新系统列表（如果当前筛选条件会影响显示）

**状态显示**:
- 启用状态：绿色开关，显示"已启用"
- 禁用状态：灰色开关，显示"已禁用"

### 8. 刷新数据交互

**操作**: 点击"刷新"按钮

**交互流程**:
1. 用户点击刷新按钮
2. 显示加载状态
3. 重新调用API获取最新数据
4. 更新系统树显示
5. 如果有选中的系统，重新获取其详细信息
6. 隐藏加载状态

## 响应式设计

### 桌面端 (>1200px)
- 左侧面板固定宽度300px
- 右侧面板自适应剩余宽度
- 系统详情以卡片形式并排显示

### 平板端 (768px - 1200px)
- 左侧面板宽度调整为250px
- 系统详情卡片垂直排列
- 操作按钮适当缩小

### 移动端 (<768px)
- 左右面板改为上下布局
- 左侧面板可折叠
- 系统详情以单列形式显示
- 操作按钮全宽显示

## 键盘快捷键

- `Ctrl/Cmd + N`: 新增系统
- `F5`: 刷新数据
- `Escape`: 关闭当前打开的对话框
- `Enter`: 在对话框中确认操作
- `↑/↓`: 在系统树中导航

## 加载状态和反馈

### 加载状态
- **页面初始化**: 显示骨架屏
- **数据刷新**: 显示加载指示器
- **操作执行**: 按钮显示加载状态

### 成功反馈
- **创建成功**: 绿色通知消息
- **更新成功**: 绿色通知消息
- **删除成功**: 绿色通知消息

### 错误反馈
- **网络错误**: 红色错误横幅
- **验证错误**: 字段下方红色错误文本
- **操作失败**: 红色通知消息

## 常见问题和解决方案

### Q1: 系统列表为空怎么办？
**A**: 检查是否有启用的系统，可以尝试切换筛选条件或点击刷新按钮。

### Q2: 无法创建系统？
**A**: 检查表单填写是否完整，特别是系统名称是否重复，URL格式是否正确。

### Q3: 删除系统后相关数据怎么办？
**A**: 删除系统会级联删除相关的模块、API和页面数据，请谨慎操作。

### Q4: 系统状态切换失败？
**A**: 可能是网络问题或权限不足，请检查网络连接或联系管理员。

## 最佳实践

1. **定期备份**: 在删除重要系统前建议先导出相关数据
2. **命名规范**: 使用清晰、有意义的系统名称
3. **分类管理**: 合理使用系统分类功能进行组织
4. **状态管理**: 及时禁用不再使用的系统
5. **权限控制**: 确保只有授权用户可以进行系统管理操作